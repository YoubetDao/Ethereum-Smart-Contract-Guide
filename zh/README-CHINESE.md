# 掌握以太坊智能合约开发：逐步指南
掌握智能合约开发的**基本**且**完整**流程（编写、部署、测试和调用合约）。

本教程不追求知识的大而全，而是遵循马斯克的学习方法：构建知识的语法树。

```
一点建议：把知识看作是一棵语义树很重要——在进入叶子 / 细节或者之前，先确保自己理解了基本原理，也就是这棵树的树干和大的树枝，然后再深入到树叶 / 细节，否则的话，那些树叶和细节将会无处栖身。
```

因此，本教程将围绕核心概念展开，相信学习完成后，你将有能力自主探索更多细节。

## 目录
1. [教程简介](#1-教程简介)
2. [以太坊开发概述](#2-以太坊开发概述)
3. [以太坊开发入门](#3-以太坊开发入门实践)
4. [以太坊进阶](#4-以太坊进阶)
5. [总结](#5-总结)


## 1. 教程简介

通过开发一个实际的 TODO 应用，我们将逐步深入以太坊合约开发的各个方面。从基础开始，逐步深入到更复杂的主题，确保您在每一步都能牢固掌握所学内容。

## 2. 以太坊开发概述

### Solidity 
Solidity 是以太坊的官方语言，不同于 Solana 可使用 Rust、C++ 等多种语言。

虽然 Vyper 也可用于以太坊应用开发，但由于安全问题（如[Vyper 重入漏洞](https://www.binance.com/en/square/post/884165)），不推荐使用。

如果你有任何一门编程语言的经验，学习 Solidity 会相对容易。可以将 Solidity 理解为高级语言的简化版，例如：Solidity ≈ Java - 多线程。

### Hardhat
Hardhat 是一个强大的辅助工具，提供编译、测试和部署功能，让开发者专注于合约的开发和验证。

类似工具还有官方的 Remix、开源的 Forge、Truffle 等。本教程选用 Hardhat，掌握一种即可，无需追求全面。

### RPC（远程过程调用）
部署合约后，调用合约方法或查询数据时需要使用 RPC。

RPC 使用简单，只需提供一个 URL，Hardhat 就能通过该 URL 为我们处理所有相关操作. 具体功能（如 `eth_sendRawTransaction`）暂不深入，聚焦当前学习重点。

## 3. 以太坊开发入门实践
本章节开始涉及代码编写。建议亲自动手，实践是最好的学习方法。

我们将通过开发一个 TODO 应用，逐步理解以太坊合约开发。完成本章后，你将掌握合约开发的基本知识。

### 1. 创建 TODO 合约
本小节学习内容: 合约基本结构
### 2. 创建任务
本小节学习内容:结构体、数据结构、函数 
### 3. 完成任务（内存/存储概念）
本小节学习内容: 内存/存储 关键字
### 4. 删除任务 
### 5. 提供查询方法：获取所有任务、判断任务是否存在
本小节学习内容: view 函数
### 6. 合约完善
本小节学习内容: Event 的使用

## 4. 以太坊进阶

### 合约测试
本小节学习内容: 使用 Hardhat 编写和运行合约测试代码.

合约测试的重要性：你在处理真金白银。且合约一旦部署无法修改，上线后发现问题将束手无策。

充分的测试至关重要，需要编写单元测试。好在这个过程相对简单。

### 合约部署
本小节学习内容: 使用 Hardhat 部署合约

### 合约交互
本小节学习内容: 使用 Hardhat 与合约交互

## 5. 总结

### 合约编写原则
简单的说: 安全 > 性能 > 其他.

### 链上安全简介
链上安全涉及多个方面，包括重入攻击、整数溢出、权限控制等。开发时需谨慎考虑各种安全风险, 这里会展示一些真实发生过的安全事件.
